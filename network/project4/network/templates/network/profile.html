<!--extend layout-->
{% extends 'network/layout.html' %}

<!--block body-->
{% block body %}
<div>
	<div><strong>{{profile.username}}</strong></div>
	{% if user.is_authenticated and user.id != profile.id %}
	<div>
		{% if not following %}
		<button
			id="follow-toggle"
			class="btn btn-sm btn-info"
			data-following="false"
		>
			Follow
		</button>
		{% else %}
		<button
			id="follow-toggle"
			class="btn btn-sm btn-info"
			data-following="true"
		>
			Unfollow
		</button>
		{% endif %}
	</div>
	{% endif %}
	<div>Followers: <span id="followers-count">{{followers_count}}</span></div>
	<div>Following: {{following_count}}</div>
</div>
<div id="posts">
    {% for post in posts_page.object_list %}
    <div class="post-card">
        <div><a href="{% url 'profile' post.author %}">{{post.author}}</a></div>
        <div>{{post.content}}</div>
        <div>{{post.created_at}}</div>
        <div>Likes: 0</div>
    </div>
    {% endfor %} {% if posts_page.object_list is empty %}
    <h4>No posts yet...</h4>
    {% else %}
    <div aria-label="Page navigation">
        <ul class="pagination">
            {% if posts_page.has_previous %}
            <li class="page-item"><a class="page-link" href="?page=1">first</a></li>
            <li class="page-item"><a class="page-link" href="?page={{posts_page.previous_page_number}}">previous</a>
            </li>
            {% endif %}

            <span>
                Page {{posts_page.number}} of {{posts_page.paginator.num_pages}}
            </span>

            {% if posts_page.has_next %}
            <li class="page-item"><a class="page-link" href="?page={{posts_page.next_page_number}}">next</a>
            </li>
            <li class="page-item"><a class="page-link" href="?page={{posts_page.paginator.num_pages}}">last</a>
            </li>
            {% endif %}
        </span>
    </div>
    {%endif%}
</div>
{% endblock %}
